<Lems>
    
    <!-- Specify which component to run -->
    <Target component="MitralSim"/>
    
    <!-- Include core NeuroML2 ComponentType definitions -->
    <Include file="Cells.xml"/>
    <Include file="Networks.xml"/>
    <Include file="Simulation.xml"/>
    
    <Include file="Exported/Mitral_0_0.cell.nml"/>
    <Include file="../Channels/pas.channel.nml"/>
    <Include file="../Channels/nax__sh0.channel.nml"/>
    <Include file="../Channels/nax__sh10.channel.nml"/>
    <Include file="../Channels/nax__sh15.channel.nml"/>
    <Include file="../Channels/kamt.channel.nml"/>
    <Include file="../Channels/kdrmt.channel.nml"/>
    
    <Include file="../GranuleCells/Exported/Granule_0_4380.cell.nml"/>
    
    <Include href="../Synapses/TEST.synapse.nml"/>
    
    <pulseGenerator id="input_1" delay="40ms" duration="100ms" amplitude="0.1 nA"/>
    
    <network id="network" type="networkWithTemperature" temperature="35 degC">

        <population id="MitralPop" type="populationList" component="Mitral_0_0" size="1">
            <instance id="0">
                <location y="0." x="0." z="0."/>
            </instance>
        </population>
        
        <population id="GranPop" type="populationList" component="Granule_0_4380" size="1">
            <instance id="0">
                <location y="0." x="0." z="0."/>
            </instance>
        </population>
        
        <projection id="Conn1" presynapticPopulation="GranPop" postsynapticPopulation="MitralPop" synapse="TEST_syn">
            <connection id="0" preCellId="../GranPop/0/Granule_0_4380" postCellId="../MitralPop/0/Mitral_0_0" preSegmentId="0" preFractionAlong="0.5" postSegmentId="0" postFractionAlong="0.5"/>
        </projection>
        
        <projection id="Conn2" postsynapticPopulation="GranPop" presynapticPopulation="MitralPop" synapse="TEST_syn">
            <connection id="0" postCellId="../GranPop/0/Granule_0_4380" preCellId="../MitralPop/0/Mitral_0_0" preSegmentId="0" preFractionAlong="0.5" postSegmentId="0" postFractionAlong="0.5"/>
        </projection>

        <inputList id="input_1" component="input_1" population="MitralPop">
            <input destination="synapses" id="0" target="../GranPop[0]"/>
        </inputList>
    </network>
    
    
    <Simulation id="MitralSim" length="180ms" step="0.01ms" target="network">
        
        <!-- 1 nA -->
        
        <Display id="Mitral_1D" title="Mitral Cell (1 nA)" timeScale="1ms" xmin="-18.0" xmax="198.0" ymin="-90" ymax="50">
            <Line id="soma_v1nA"       quantity="MitralPop/0/Mitral_0_0/0/v"  scale="1" color="#f3e4c5" timeScale="1ms"/>
            <Line id="soma_v1nAB"       quantity="GranPop/0/Granule_0_4380/0/v"  scale="1" color="#f3e4c5" timeScale="1ms"/>
        </Display>
        
    </Simulation>
    
</Lems>
